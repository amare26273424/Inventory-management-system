<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Edit User</title>
  <!-- Bootstrap CSS -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.0/css/bootstrap.min.css">

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

<!-- Bootstrap JS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>

<!-- Font Awesome JS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/js/all.min.js"></script>

</head>
<body>

  <button onclick="goBack()">Go Back</button>

  <script>
  function goBack() {
    window.history.back();
  }
  </script>


  <div class="container mt-5 w-50" id="adduser">
    <h2 class="loginh2">edit product</h2>
    <form id="edit-form">
      <div class="mb-3 mt-3">
        <label for="name">Name of product:</label>
        <input  class="form-control" type="text" id="name" name="pName"  required>
      </div>
      <div class="mb-3">
        <label for="pNumber">quentity:</label>
        <input class="form-control"  type='number' id="number" name="pNumber"  required>
      </div>
      <div class="mb-3">
        <label for="description">description:</label>
        <div class="input-group">
          <input type="description" class="form-control" id="description" name="description"  required/>
        </div>
      </div>
  
      <div class="mb-3">
        <label for="role">Pgiver:</label>
        <input class="form-control" type="text" id="Pgiver" name="Pgiver" required>
      </div>
     
      
          
      <button type="submit" id="submitbtn"  class="btn btn-primary">Save</button>
     
    </form>
  </div>
 
  
  </form>

  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  <script>
    const urlParams = new URLSearchParams(window.location.search);
    const userId = urlParams.get('id');
    const pname = document.getElementById('name');
    const pnumber = document.getElementById('number');
    const description = document.getElementById('description');
    const Pgiver = document.getElementById('Pgiver');
    const addedDate= document.getElementById('addedDate');
    



   


       
     
    async function fetchUser() {
      try {
        const response = await axios.get(`/product/${userId}`);
        const user =await response.data;     
        pname.value = user.pName;
        pnumber.value = user.pNumber;
        description.value = user.description;
        Pgiver.value = user.Pgiver;
      } catch (error) {
        console.error(error);
      }
    }

  async function updateUser(event) {
  event.preventDefault();
  
  const data = {
    pName: pname.value,
    pNumber: pnumber.value,
    description: description.value ,
    Pgiver:Pgiver.value
  };
  
  // Display a confirmation prompt
  const confirmed = confirm('Are you sure you want to update the product?');
  
  if (confirmed) {
    try {
      await axios.put(`http://127.0.0.1:5000/product/${userId}`, data);
       alert('product updated successfully')
       window.location.href='/getstorekepperpage'
      
    } catch (error) {
      console.error(error);
      alert('Failed to update user');
    }
  }
}



    fetchUser();
   document.getElementById('submitbtn').addEventListener('click', updateUser);



       
  </script>
</body>
</html>
